import{u as k,b as d,c,o as m,w as r,d as q,a as l,Q as C,e as f,f as w,g as S,i as v,h as g,j as p,k as R,n as U,t as y,l as b}from"./index-lAEU-3ZN.js";import{Q as h}from"./QLinearProgress-BjU2gNSe.js";import{Q as B}from"./QForm-DsYz_fxS.js";import{Q as $}from"./QPage-eCB9bOON.js";import{v as I,g as N}from"./validators-DMKJKxBu.js";import{u as z}from"./use-quasar-DlnkSLdv.js";const A={key:2,class:"text-negative text-caption"},G={__name:"RegisterPage",setup(E){const n=z(),x=k(),V=q(),a=d({username:"",email:"",password:"",confirmPassword:""}),s=d(null),u=d(!0),o=d({label:"",color:"grey",value:0}),P=()=>{o.value=N(a.value.password)},Q=async()=>{if(s.value=null,a.value.password!==a.value.confirmPassword){s.value="Passwords do not match",n.notify({type:"negative",message:s.value,timeout:3e3});return}if(!I(a.value.password)){s.value="Password must include uppercase, lowercase, number, and special character",n.notify({type:"negative",message:s.value,timeout:3e3});return}try{await x.register({username:a.value.username,email:a.value.email,password:a.value.password}),n.notify({type:"positive",message:"Registration successful! You can now login.",timeout:3e3}),V.push("/login")}catch(i){s.value=i,n.notify({type:"negative",message:i||"Registration failed",timeout:3e3})}};return(i,e)=>(m(),c($,{class:"flex flex-center"},{default:r(()=>[l(C,{class:"q-pa-md shadow-2 rounded-borders",style:{width:"400px","max-width":"90vw"}},{default:r(()=>[l(f,null,{default:r(()=>[...e[6]||(e[6]=[w("div",{class:"text-h6 text-center"},"Create Account",-1)])]),_:1}),l(B,{onSubmit:S(Q,["prevent"]),class:"q-gutter-md"},{default:r(()=>[l(p,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.username=t),label:"Username",outlined:"",required:""},null,8,["modelValue"]),l(p,{modelValue:a.value.email,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.email=t),label:"Email",type:"email",outlined:"",required:""},null,8,["modelValue"]),l(p,{modelValue:a.value.password,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.password=t),label:"Password",type:u.value?"password":"text",outlined:"",required:"",onInput:P},{append:r(()=>[l(R,{name:u.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=t=>u.value=!u.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),o.value.label?(m(),c(h,{key:0,value:o.value.value,color:o.value.color,size:"10px",class:"rounded-borders q-mt-xs"},null,8,["value","color"])):v("",!0),o.value.label?(m(),g("div",{key:1,class:U(["text-caption text-center",`text-${o.value.color}`])},y(o.value.label),3)):v("",!0),l(p,{modelValue:a.value.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.confirmPassword=t),label:"Confirm Password",type:u.value?"password":"text",outlined:"",required:""},null,8,["modelValue","type"]),s.value?(m(),g("div",A,y(s.value),1)):v("",!0),l(b,{label:"Register",type:"submit",color:"primary",class:"full-width"})]),_:1}),l(f,{class:"text-center q-mt-md"},{default:r(()=>[e[7]||(e[7]=w("span",null,"Already have an account? ",-1)),l(b,{flat:"",color:"primary",label:"Login",onClick:e[5]||(e[5]=t=>i.$router.push("/login"))})]),_:1})]),_:1})]),_:1}))}};export{G as default};
