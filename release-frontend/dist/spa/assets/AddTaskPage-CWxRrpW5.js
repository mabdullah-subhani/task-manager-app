import{b as D,c as y,o as T,w as r,d as g,f as d,a as s,Q as k,g as b,j as u,l as n}from"./index-lAEU-3ZN.js";import{u as V,Q as w}from"./task-store-kCJIp0wi.js";import{Q}from"./QForm-DsYz_fxS.js";import{Q as q}from"./QPage-eCB9bOON.js";import{u as N}from"./use-quasar-DlnkSLdv.js";import"./format-Cw3Ttr5_.js";const P={class:"row justify-end q-gutter-sm"},M={__name:"AddTaskPage",setup(S){const m=g(),o=N(),p=V(),e=D({title:"",description:"",status:"PENDING",dueDateTime:""}),f=l=>l?l+":00.000":null,c=async()=>{if(!e.value.title||!e.value.description||!e.value.dueDateTime){o.notify({type:"negative",message:"Please fill all required fields"});return}if(new Date(e.value.dueDateTime)<new Date){o.notify({type:"negative",message:"Due date cannot be in the past"});return}const a={title:e.value.title,description:e.value.description,status:e.value.status,dueDate:f(e.value.dueDateTime)};try{await p.addTask(a),o.notify({type:"positive",message:"Task created successfully!"}),m.push("/dashboard/tasks")}catch(i){console.error("Error creating task:",i);const v=i.response?.data?.message||"Failed to create task. Please try again.";o.notify({type:"negative",message:v})}};return(l,t)=>(T(),y(q,{class:"q-pa-md"},{default:r(()=>[t[5]||(t[5]=d("div",{class:"text-h5 q-mb-md"},"Add New Task",-1)),s(k,{flat:"",bordered:"",class:"q-pa-md"},{default:r(()=>[s(Q,{onSubmit:b(c,["prevent"]),class:"q-gutter-md"},{default:r(()=>[s(u,{modelValue:e.value.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.title=a),label:"Title",filled:"",required:""},null,8,["modelValue"]),s(u,{modelValue:e.value.description,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.description=a),label:"Description",type:"textarea",filled:"",required:""},null,8,["modelValue"]),s(w,{modelValue:e.value.status,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.status=a),options:["PENDING","COMPLETED"],label:"Status",filled:""},null,8,["modelValue"]),s(u,{modelValue:e.value.dueDateTime,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.dueDateTime=a),label:"Due Date & Time",type:"datetime-local",filled:"",required:""},null,8,["modelValue"]),d("div",P,[s(n,{flat:"",label:"Cancel",color:"negative",onClick:t[4]||(t[4]=a=>l.$router.push("/dashboard/tasks"))}),s(n,{type:"submit",label:"Save Task",color:"primary"})])]),_:1})]),_:1})]),_:1}))}};export{M as default};
