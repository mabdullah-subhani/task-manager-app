import{u as V,b as D,Y as y,c as Q,o as _,w as a,f as o,a as e,t as n,a3 as u,Q as r,e as i,a0 as C,l as c,ag as S,j as v,ah as q,Z as E}from"./index-lAEU-3ZN.js";import{Q as h,a as b,b as U,C as P,t as B,f as N}from"./date-utils-BSPpnmBn.js";import{u as L,Q as M}from"./task-store-kCJIp0wi.js";import{Q as $}from"./QPage-eCB9bOON.js";import{u as A}from"./use-quasar-DlnkSLdv.js";import"./QList-CRb-0MPY.js";import"./QLinearProgress-BjU2gNSe.js";import"./format-Cw3Ttr5_.js";const I={class:"row items-center q-mb-lg"},O={class:"col"},j={class:"row q-mb-lg q-gutter-md"},G={class:"text-h4"},H={class:"text-h4"},R={class:"text-h4"},ae={__name:"DashboardPage",setup(W){const g=V().user,d=L(),T=A(),k=[{name:"title",label:"Title",field:"title",sortable:!0},{name:"description",label:"Description",field:"description",sortable:!0},{name:"status",label:"Status",field:"status",sortable:!0},{name:"dueDate",label:"Due Date",field:"dueDate",sortable:!0},{name:"actions",label:"Actions",field:"actions",sortable:!1}],m=D(!1),l=D({}),w=f=>{l.value={...f},l.value.dueDate&&(l.value.dueDateTime=B(l.value.dueDate)),m.value=!0},x=async()=>{if(new Date(l.value.dueDateTime)<new Date){T.notify({type:"negative",message:"Due date cannot be in the past"});return}const s={title:l.value.title,description:l.value.description,status:l.value.status,dueDate:N(l.value.dueDateTime)};try{await d.updateTask(l.value.id,s),m.value=!1}catch(p){console.error("Error updating task:",p)}};return y(()=>{d.fetchTasks(0,5)}),(f,t)=>(_(),Q($,{class:"q-pa-md"},{default:a(()=>[o("div",I,[o("div",O,[o("h4",null,"Welcome, "+n(u(g)?.username||"User"),1),t[5]||(t[5]=o("p",{class:"text-subtitle2"},"Hereâ€™s a summary of your tasks",-1))])]),o("div",j,[e(r,{class:"col-12 col-sm-6 col-md-3 bg-primary text-white"},{default:a(()=>[e(i,null,{default:a(()=>[t[6]||(t[6]=o("div",{class:"text-h6"},"Total Tasks",-1)),o("div",G,n(u(d).totalElements),1)]),_:1})]),_:1}),e(r,{class:"col-12 col-sm-6 col-md-3 bg-positive text-white"},{default:a(()=>[e(i,null,{default:a(()=>[t[7]||(t[7]=o("div",{class:"text-h6"},"Completed",-1)),o("div",H,n(u(d).completedTasks),1)]),_:1})]),_:1}),e(r,{class:"col-12 col-sm-6 col-md-3 bg-warning text-white"},{default:a(()=>[e(i,null,{default:a(()=>[t[8]||(t[8]=o("div",{class:"text-h6"},"Pending",-1)),o("div",R,n(u(d).pendingTasks),1)]),_:1})]),_:1})]),e(r,{flat:"",bordered:""},{default:a(()=>[e(i,null,{default:a(()=>[t[9]||(t[9]=o("div",{class:"text-h6 q-mb-md"},"Recent Tasks",-1)),e(h,{rows:u(d).tasks,columns:k,"row-key":"id",flat:"",bordered:""},{"body-cell-actions":a(s=>[e(b,{align:"right"},{default:a(()=>[e(c,{dense:"",flat:"",color:"primary",icon:"edit",onClick:p=>w(s.row)},null,8,["onClick"]),e(c,{dense:"",flat:"",color:"negative",icon:"delete",onClick:p=>u(d).deleteTask(s.row.id)},null,8,["onClick"])]),_:2},1024)]),"body-cell-status":a(s=>[e(b,{props:s},{default:a(()=>[e(U,{color:s.row.status==="COMPLETED"?"green":"orange",align:"center",class:"q-pa-sm text-white",rounded:""},{default:a(()=>[C(n(s.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1}),e(S,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s)},{default:a(()=>[e(r,{style:{"min-width":"400px"}},{default:a(()=>[e(i,null,{default:a(()=>[...t[10]||(t[10]=[o("div",{class:"text-h6"},"Edit Task",-1)])]),_:1}),e(i,{class:"q-gutter-md"},{default:a(()=>[e(v,{modelValue:l.value.title,"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.title=s),label:"Title",filled:""},null,8,["modelValue"]),e(v,{modelValue:l.value.description,"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.description=s),label:"Description",type:"textarea",filled:""},null,8,["modelValue"]),e(M,{modelValue:l.value.status,"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.status=s),options:["PENDING","COMPLETED"],label:"Status",filled:""},null,8,["modelValue"]),e(v,{modelValue:l.value.dueDateTime,"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.dueDateTime=s),label:"Due Date & Time",type:"datetime-local",filled:"",required:""},null,8,["modelValue"])]),_:1}),e(q,{align:"right"},{default:a(()=>[E(e(c,{flat:"",label:"Cancel"},null,512),[[P]]),e(c,{color:"primary",label:"Save",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{ae as default};
